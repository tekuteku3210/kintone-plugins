# TabView プラグイン テストガイド

**作成日**: 2026年1月4日
**対象**: TabView v1.0.0

---

## 目次

1. [テスト環境の準備](#テスト環境の準備)
2. [プラグインのインストール](#プラグインのインストール)
3. [テストケース](#テストケース)
4. [チェックリスト](#チェックリスト)
5. [既知の問題](#既知の問題)

---

## テスト環境の準備

### 1. kintone開発環境

テストに必要な環境:
- **kintone開発環境**: サブドメイン（例: `yourcompany-dev.cybozu.com`）
- **ブラウザ**: Chrome, Edge, Safari, Firefox
- **デバイス**: PC, タブレット, スマホ

### 2. テスト用アプリの作成

以下のフィールドを持つkintoneアプリを作成してください：

#### アプリ名: 「TabView テスト用アプリ」

#### フィールド構成:

**基本情報タブ用のフィールド**:
- `氏名` (テキスト（1行）)
- `メールアドレス` (テキスト（1行）)
- `電話番号` (テキスト（1行）)
- `部署` (ドロップダウン: 営業部, 開発部, 総務部)

**詳細情報タブ用のフィールド**:
- `住所` (テキスト（複数行）)
- `会社名` (テキスト（1行）)
- `役職` (テキスト（1行）)
- `入社日` (日付)

**履歴タブ用のフィールド**:
- `作成日時` (作成日時)
- `更新日時` (更新日時)
- `ステータス` (ドロップダウン: 新規, 対応中, 完了)

**メモタブ用のフィールド**:
- `メモ` (リッチテキスト)
- `添付ファイル` (ファイル)

---

## プラグインのインストール

### 手順

1. **プラグインZIPファイルの場所**
   ```
   C:\projects\kintone-plugins\plugins\tab-view\plugin.zip
   ```

2. **kintone管理画面でプラグインをインストール**
   1. kintoneにログイン
   2. 右上の歯車アイコン → `kintone システム管理`
   3. `プラグイン` → `読み込む`
   4. `plugin.zip`を選択してアップロード
   5. インストール成功を確認

3. **アプリにプラグインを追加**
   1. 「TabView テスト用アプリ」を開く
   2. 右上の歯車アイコン → `アプリの設定`
   3. `設定` → `プラグイン`
   4. `TabView - タブビュー`を追加
   5. `アプリを更新`

---

## テストケース

### Test Case 1: プラグイン設定画面の表示

**目的**: 設定画面が正しく表示されることを確認

**手順**:
1. アプリ設定画面で`TabView`プラグインの設定アイコンをクリック
2. 設定画面が表示されることを確認

**期待結果**:
- [ ] 設定画面が正しく表示される
- [ ] 「無料プランでは最大5タブまで作成できます（現在: 0/5）」と表示される
- [ ] 「タブがありません。」というメッセージが表示される
- [ ] 「+ タブを追加」ボタンが表示される

---

### Test Case 2: タブの追加

**目的**: タブを追加できることを確認

**手順**:
1. 「+ タブを追加」ボタンをクリック
2. タブ名に「基本情報」と入力
3. アイコンに「👤」と入力
4. フィールドで`氏名`, `メールアドレス`, `電話番号`, `部署`にチェック
5. 「タブを保存」ボタンをクリック

**期待結果**:
- [ ] タブ編集エリアが表示される
- [ ] タブ名を入力できる
- [ ] アイコンを入力できる
- [ ] フィールド一覧が表示される
- [ ] フィールドをチェックボックスで選択できる
- [ ] 「タブを保存」をクリックするとタブ一覧に追加される
- [ ] 「無料プランでは最大5タブまで作成できます（現在: 1/5）」と更新される

---

### Test Case 3: 複数タブの追加

**目的**: 複数のタブを追加できることを確認

**手順**:
1. 以下のタブを追加:
   - **タブ2**: 名前「詳細情報」, アイコン「ℹ️」, フィールド: 住所, 会社名, 役職, 入社日
   - **タブ3**: 名前「履歴」, アイコン「📝」, フィールド: 作成日時, 更新日時, ステータス
   - **タブ4**: 名前「メモ」, アイコン「📋」, フィールド: メモ, 添付ファイル

**期待結果**:
- [ ] 4つのタブが作成される
- [ ] タブ一覧に4つのタブが表示される
- [ ] 「無料プランでは最大5タブまで作成できます（現在: 4/5）」と表示される

---

### Test Case 4: タブ名のバリデーション

**目的**: タブ名のバリデーションが機能することを確認

**手順**:
1. 「+ タブを追加」をクリック
2. タブ名を空欄のまま「タブを保存」をクリック → エラー確認
3. タブ名に「あいうえおかきくけこさしすせそたちつてとなにぬねの」（21文字）を入力して保存 → エラー確認
4. タブ名に「基本情報」（既存のタブ名）を入力して保存 → エラー確認

**期待結果**:
- [ ] タブ名が空欄の場合: 「⚠️ タブ名を入力してください」と表示
- [ ] タブ名が20文字を超える場合: 「⚠️ タブ名は20文字以内で入力してください」と表示
- [ ] タブ名が重複する場合: 「⚠️ このタブ名は既に使用されています。別の名前を入力してください。」と表示

---

### Test Case 5: フィールド選択のバリデーション

**目的**: フィールド選択のバリデーションが機能することを確認

**手順**:
1. 「+ タブを追加」をクリック
2. タブ名に「テストタブ」と入力
3. フィールドを1つも選択せずに「タブを保存」をクリック

**期待結果**:
- [ ] 「⚠️ 少なくとも1つのフィールドを選択してください」と表示

---

### Test Case 6: タブの上限テスト

**目的**: 無料版の上限（5タブ）が機能することを確認

**手順**:
1. タブ4まで作成済みの状態で、タブ5を追加
2. 「+ タブを追加」ボタンをクリックしようとする

**期待結果**:
- [ ] 5つ目のタブは追加できる
- [ ] 6つ目のタブを追加しようとすると「+ タブを追加（上限に達しています）」ボタンが無効化
- [ ] クリックしても何も起きない

---

### Test Case 7: タブの順序変更

**目的**: タブの順序を変更できることを確認

**手順**:
1. タブ一覧で「詳細情報」タブの「↑」ボタンをクリック
2. 「基本情報」と「詳細情報」の順序が入れ替わることを確認

**期待結果**:
- [ ] タブの順序が変更される
- [ ] 一番上のタブの「↑」ボタンは無効化されている
- [ ] 一番下のタブの「↓」ボタンは無効化されている

---

### Test Case 8: タブの編集

**目的**: タブを編集できることを確認

**手順**:
1. 「基本情報」タブの「編集」ボタンをクリック
2. タブ名を「基本情報（更新済み）」に変更
3. 「タブを保存」をクリック

**期待結果**:
- [ ] タブ編集エリアに既存のタブ情報が表示される
- [ ] タブ名を変更できる
- [ ] 変更がタブ一覧に反映される

---

### Test Case 9: タブの削除

**目的**: タブを削除できることを確認

**手順**:
1. 「メモ」タブの「タブを削除」ボタンをクリック
2. 確認ダイアログで「OK」をクリック

**期待結果**:
- [ ] 確認ダイアログが表示される: 「『メモ』タブを削除しますか?」
- [ ] 「OK」をクリックするとタブが削除される
- [ ] タブ数が1つ減る

---

### Test Case 10: 設定の保存

**目的**: 設定を保存できることを確認

**手順**:
1. タブを2-3個作成
2. 「設定を保存」ボタンをクリック

**期待結果**:
- [ ] 「設定を保存しました」というアラートが表示される
- [ ] プラグイン一覧画面に戻る

---

### Test Case 11: レコード詳細画面でのタブ表示

**目的**: レコード詳細画面でタブが表示されることを確認

**手順**:
1. アプリ設定を保存して公開
2. レコードを1件作成（すべてのフィールドに値を入力）
3. レコード詳細画面を開く

**期待結果**:
- [ ] レコード詳細画面の上部にタブUIが表示される
- [ ] 設定したタブ名とアイコンが表示される
- [ ] 最初のタブが選択状態になっている（背景が青、下線あり）
- [ ] 最初のタブに割り当てたフィールドのみ表示されている

---

### Test Case 12: タブの切り替え

**目的**: タブを切り替えるとフィールドの表示が変わることを確認

**手順**:
1. レコード詳細画面で「基本情報」タブをクリック
2. 「詳細情報」タブをクリック
3. 「履歴」タブをクリック

**期待結果**:
- [ ] タブをクリックすると選択状態が変わる
- [ ] 選択されたタブのフィールドのみ表示される
- [ ] 他のタブのフィールドは非表示になる
- [ ] タブ切り替えがスムーズ（0.1秒以内）

---

### Test Case 13: タブが1個の場合

**目的**: タブが1個の場合はタブUIが表示されないことを確認

**手順**:
1. 設定画面でタブを1個だけにする
2. 設定を保存
3. レコード詳細画面を開く

**期待結果**:
- [ ] タブUIが表示されない
- [ ] すべてのフィールドが通常通り表示される

---

### Test Case 14: タブが未設定の場合

**目的**: タブが未設定の場合は通常のレコード画面が表示されることを確認

**手順**:
1. 設定画面ですべてのタブを削除
2. 設定を保存
3. レコード詳細画面を開く

**期待結果**:
- [ ] タブUIが表示されない
- [ ] すべてのフィールドが通常通り表示される

---

### Test Case 15: フィールド検索機能

**目的**: 設定画面でフィールド検索が機能することを確認

**手順**:
1. タブ編集エリアで検索ボックスに「メール」と入力

**期待結果**:
- [ ] 「メールアドレス」フィールドのみ表示される
- [ ] 他のフィールドは非表示になる

---

### Test Case 16: レスポンシブデザイン（スマホ）

**目的**: スマホでタブUIが適切に表示されることを確認

**手順**:
1. Chrome DevToolsでモバイルビューに切り替え（例: iPhone 12）
2. レコード詳細画面を開く

**期待結果**:
- [ ] タブが縦並びまたはドロップダウンで表示される
- [ ] タップしやすいサイズ（44×44px以上）

---

### Test Case 17: ブラウザ互換性

**目的**: 複数のブラウザで動作することを確認

**ブラウザ**:
- [ ] Chrome（最新版）
- [ ] Edge（最新版）
- [ ] Safari（最新版）
- [ ] Firefox（最新版）

**手順**:
各ブラウザでTest Case 11-12を実施

**期待結果**:
- [ ] すべてのブラウザで正常に動作する

---

### Test Case 18: エラーハンドリング

**目的**: エラー時に適切なメッセージが表示されることを確認

**手順**:
1. 設定画面でネットワークを切断（DevToolsのOfflineモード）
2. タブを追加して「設定を保存」をクリック

**期待結果**:
- [ ] 「⚠️ ネットワークエラーが発生しました。もう一度お試しください。」または類似のエラーメッセージが表示される

---

## チェックリスト

### 設定画面

- [ ] プラグイン設定画面が正しく表示される
- [ ] タブを追加できる
- [ ] タブ名・アイコン・フィールドを設定できる
- [ ] タブの順序を変更できる
- [ ] タブを編集できる
- [ ] タブを削除できる
- [ ] 設定を保存できる
- [ ] バリデーションエラーが適切に表示される
- [ ] 無料版の上限（5タブ）が機能する
- [ ] フィールド検索が機能する

### レコード詳細画面

- [ ] タブUIが表示される
- [ ] タブをクリックすると切り替わる
- [ ] フィールドの表示/非表示が正しく制御される
- [ ] タブが1個の場合はUIが表示されない
- [ ] タブ未設定の場合は通常画面が表示される
- [ ] アニメーションがスムーズ

### デザイン

- [ ] タブの選択状態が明確（背景色+下線+太字）
- [ ] ホバー時に背景色が変わる
- [ ] レスポンシブデザインが機能する（PC/タブレット/スマホ）
- [ ] アクセシビリティ（キーボード操作、ARIA属性）

### ブラウザ互換性

- [ ] Chrome
- [ ] Edge
- [ ] Safari
- [ ] Firefox

---

## 既知の問題

### 未実装の機能

1. **ドラッグ&ドロップでの順序変更**
   - 現在: 上下ボタンで順序変更
   - 将来: ドラッグ&ドロップに対応予定

2. **共通フィールド設定**
   - 現在: すべてのタブで表示されるフィールドは未設定
   - 将来: 設定画面で共通フィールドを指定可能に

3. **タブアイコンのカスタマイズ**
   - 現在: 絵文字またはテキストのみ
   - 将来: Font Awesomeアイコンやカスタム画像に対応予定

### 制限事項

1. **無料版は最大5タブ**
   - Pro版（予定）では無制限

2. **テーブルフィールド内のフィールドは非対応**
   - テーブル全体は表示/非表示可能だが、テーブル内の個別フィールドは対応していない

---

## テスト結果の記録

### テスト実施日: ____年____月____日

### テスト実施者: ________________________

### 環境:
- kintoneサブドメイン: ________________________
- ブラウザ: ________________________
- OSバージョン: ________________________

### 結果:
- 成功したテストケース数: ____ / 18
- 失敗したテストケース数: ____

### 発見されたバグ:

| No. | テストケース | 症状 | 再現手順 | 優先度 |
|-----|------------|------|---------|--------|
| 1   |            |      |         | 高/中/低 |
| 2   |            |      |         | 高/中/低 |

---

**テストガイド終わり**
